1. use the futex 

http://www.linuxidc.com/Linux/2011-02/32229.htm
